var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ELang;(function(n){var r=function(){function n(){this.insert=new jQuery.Deferred,this.modify=new jQuery.Deferred,this.remove=new jQuery.Deferred,this.select=new jQuery.Deferred}return n}(),u=function(){function n(){this.insertCallback=null,this.insertHandler=null,this.modifyCallback=null,this.modifyHandler=null,this.removeCallback=null,this.removeHandler=null,this.selectHandler=null,this.selectCallback=null,this.btnAddHandler=null,this.btnAddClickHandler=null}return n}(),t=function(n){function t(){n.call(this),this.headLabel="lblEditHead",this.resultHeadLabel="lblEditedExpressionsHead",this.editFormHtml='<form class="form-search"><div class="controls controls-row"><\/div><\/form>',this.editFieldHtml='<input class="input-large span2" type="text" placeholder="-" />',this.addButtonHtml='<button type="submit" class="btn btn-primary span0"><span><\/span><\/button>',this.addButtonLabel="lblAdd",this.editKeyLabel="lblEditKeyField",this.editValueLabel="lblEditValueField"}return __extends(t,n),t}(n.ELangBaseDefaults),i;n.ELangEditDefaults=t,i=function(i){function f(){i.call(this),this.name="eLang-Edit",this.description="eLang - Language Learning edit functionality.",this.defaults=new t,this.delegates=new u,this.events=new r}return __extends(f,i),f.prototype.initialize=function(n,t){i.prototype.initialize.call(this,n,t),this.delegates.insertHandler=jQuery.proxy(this._onInsert,this),this.delegates.modifyHandler=jQuery.proxy(this._onModify,this),this.delegates.removeHandler=jQuery.proxy(this._onRemove,this),this.delegates.selectHandler=jQuery.proxy(this._onSelect,this),this.delegates.btnAddHandler=jQuery.proxy(this._onAddClick,this),this.delegates.insertCallback=jQuery.proxy(this._onInsertCallback,this),this.delegates.modifyCallback=jQuery.proxy(this._onModifyCallback,this),this.delegates.removeCallback=jQuery.proxy(this._onRemoveCallback,this),this.delegates.selectCallback=jQuery.proxy(this._onSelectCallback,this),this.events.insert.done(this.delegates.insertHandler),this.events.modify.done(this.delegates.modifyHandler),this.events.remove.done(this.delegates.removeHandler),this.events.select.done(this.delegates.selectHandler);var r=this.delegates.btnAddHandler;this.delegates.btnAddClickHandler=function(){var t=this,n=t.parentNode.getElementsByTagName("input"),i=n[0],u=n[1];r(i,u)},this.createContent(),this.element.data("elang-edit",jQuery.proxy(this.processCommand,this))},f.prototype.createContent=function(){i.prototype.createContent.call(this);var e=this.element.next("div"),s="."+this.defaults.resultCSS.split(" ")[0],h=e.find("*").filter(s),o=jQuery(this.defaults.editFormHtml),r=jQuery(this.defaults.editFieldHtml),u=jQuery(this.defaults.editFieldHtml),t=jQuery(this.defaults.addButtonHtml),c=n.ELangCommon.resource.selectedLang,l=n.ELangCommon.getLabel(this.defaults.editKeyLabel),a=n.ELangCommon.getLabel(this.defaults.editValueLabel),f=this.getLastChild(o);r.add(r.find("*")).filter("input[placeholder]").attr("id",this.defaults.editKeyLabel).attr("placeholder",l),u.add(u.find("*")).filter("input[placeholder]").attr("id",this.defaults.editValueLabel).attr("placeholder",a),t.add(t.find("*")).filter("span").attr("id",this.defaults.addButtonLabel),t.click(this.delegates.btnAddClickHandler),f.append(r),f.append(u),f.append(t),h.before(o),n.ELangCommon.setLang(c,e)},f.prototype._onAddClick=function(){},f.prototype._onInsert=function(){},f.prototype._onModify=function(){},f.prototype._onRemove=function(){},f.prototype._onSelect=function(){},f.prototype._onInsertCallback=function(){},f.prototype._onModifyCallback=function(){},f.prototype._onRemoveCallback=function(){},f.prototype._onSelectCallback=function(){},f.prototype._insert=function(){this.events.insert.resolve()},f.prototype._modify=function(){this.events.modify.resolve()},f.prototype._remove=function(){this.events.remove.resolve()},f.prototype._select=function(){this.events.select.resolve()},f}(n.ELangBase),n.ELangEdit=i})(ELang||(ELang={})),function(n){n.fn.elangEdit=function(t,i){for(var f=this,e,u,o,r=0;r<f.length;r++)if(e=f[r],u=e["elang-edit"],i&&typeof i=="string"?n.isFunction(u)&&u(i):u||(o=new ELang.ELangEdit,o.initialize(e,t)),!0)break;return f}}(jQuery)