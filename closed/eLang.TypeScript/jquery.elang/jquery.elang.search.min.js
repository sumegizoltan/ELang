var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ELang;(function(n){var r=function(){function n(){this.select=new jQuery.Deferred}return n}(),t,i,u;n.ELangSearchEvents=r,t=function(){function n(){this.selectCallback=null,this.selectHandler=null,this.langDirectionHandler=null,this.langDirectionClickHandler=null,this.searchHandler=null,this.searchClickHandler=null}return n}(),n.ELangSearchDelegates=t,i=function(n){function t(){n.call(this),this.headLabel="lblFindHead",this.resultHeadLabel="lblFindedExpressionsHead",this.expressionsLabel="lblSearchInExpressions",this.meaningsLabel="lblSearchInMeanings",this.expressionsTooltip="lblSearchInExpressionsHlp",this.meaningsTooltip="lblSearchInMeaningsHlp",this.searchFormHtml='<form class="form-search"><div class="input-append"><\/div><\/form>',this.searchFieldHtml='<input type="text" class="search-query" />',this.searchButtonLabel="lblFind"}return __extends(t,n),t}(n.ELangBaseDefaults),n.ELangSearchDefaults=i,u=function(u){function f(){u.call(this),this.name="eLang-Search",this.description="eLang - Language Learning search functionality.",this.defaults=new i,this.delegates=new t,this.events=new r,this.isSearchInExp=!0}return __extends(f,u),f.prototype.initialize=function(n,t){u.prototype.initialize.call(this,n,t),this.delegates.selectHandler=jQuery.proxy(this._onSelect,this),this.delegates.selectCallback=jQuery.proxy(this._onSelectCallback,this),this.delegates.langDirectionHandler=jQuery.proxy(this._onDirectionClick,this),this.delegates.searchHandler=jQuery.proxy(this._select,this),this.events.select.done(this.delegates.selectHandler);var i=this.delegates.langDirectionHandler,r=this.delegates.searchHandler;this.delegates.searchClickHandler=function(){var n=this,t=n.parentNode.getElementsByTagName("input")[0];r(t)},this.delegates.langDirectionClickHandler=function(){var n=this;i(n)},this.createContent(),this.element.data("elang-search",jQuery.proxy(this.processCommand,this))},f.prototype.createContent=function(){u.prototype.createContent.call(this);var i=this.element.next("div"),o="."+this.defaults.resultCSS.split(" ")[0],r=i.find("*").filter(o);this.createRadioGroup(r,!1,2,0,[this.defaults.expressionsLabel,this.defaults.meaningsLabel],this.delegates.langDirectionClickHandler,[this.defaults.expressionsTooltip,this.defaults.meaningsTooltip]);var f=jQuery(this.defaults.searchFormHtml),s=jQuery(this.defaults.searchFieldHtml),t=jQuery(this.defaults.submitButtonHtml),e=this.getLastChild(f);t.add(t.find("*")).filter("span").attr("id",this.defaults.searchButtonLabel),t.click(this.delegates.searchClickHandler),e.append(s),e.append(t),r.before(f),n.ELangCommon.setLang(n.ELangCommon.resource.selectedLang,i)},f.prototype._onDirectionClick=function(n){this.isSearchInExp=this.isRdoChecked(n,this.defaults.expressionsLabel)},f.prototype._onSelect=function(t){var i=t.value,r;i?(r=n.ELangDB.getInstance(),r.select(i,this.delegates.selectCallback)):this._onSelectCallback()},f.prototype._onSelectCallback=function(){},f.prototype._select=function(n){this.events.select.resolve(n)},f}(n.ELangBase),n.ELangSearch=u})(ELang||(ELang={})),function(n){n.fn.elangSearch=function(n,t){return new ELang.FnJQuery(this,n,t,"ELangSearch","elang-search")}}(jQuery)